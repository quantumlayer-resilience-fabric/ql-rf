# QuantumLayer Resilience Fabric - Environment Variables
# Copy this file to .env and update values for your environment

# =============================================================================
# Application
# =============================================================================
RF_ENV=development
RF_LOG_LEVEL=debug
RF_LOG_FORMAT=json

# =============================================================================
# API Service
# =============================================================================
RF_API_HOST=0.0.0.0
RF_API_PORT=8080
RF_API_READ_TIMEOUT=30s
RF_API_WRITE_TIMEOUT=30s
RF_API_SHUTDOWN_TIMEOUT=10s

# =============================================================================
# Database (PostgreSQL)
# =============================================================================
RF_DATABASE_URL=postgres://postgres:postgres@localhost:5432/qlrf?sslmode=disable
RF_DATABASE_MAX_OPEN_CONNS=25
RF_DATABASE_MAX_IDLE_CONNS=5
RF_DATABASE_CONN_MAX_LIFETIME=5m

# =============================================================================
# Redis
# =============================================================================
RF_REDIS_URL=redis://localhost:6379/0
RF_REDIS_MAX_RETRIES=3

# =============================================================================
# Kafka
# =============================================================================
RF_KAFKA_BROKERS=localhost:9092
RF_KAFKA_CONSUMER_GROUP=ql-rf
RF_KAFKA_TOPIC_ASSET_DISCOVERED=asset.discovered
RF_KAFKA_TOPIC_DRIFT_DETECTED=drift.detected
RF_KAFKA_TOPIC_IMAGE_PUBLISHED=image.published

# =============================================================================
# Authentication (Clerk)
# =============================================================================
RF_CLERK_SECRET_KEY=sk_test_xxxxx
RF_CLERK_PUBLISHABLE_KEY=pk_test_xxxxx

# =============================================================================
# Cloud Connectors - AWS
# =============================================================================
# Uses default AWS credential chain (env vars, ~/.aws/credentials, IAM role)
# RF_AWS_REGION=us-east-1
# RF_AWS_ACCESS_KEY_ID=
# RF_AWS_SECRET_ACCESS_KEY=
# RF_AWS_ASSUME_ROLE_ARN=arn:aws:iam::123456789012:role/ql-rf-connector

# =============================================================================
# Cloud Connectors - Azure
# =============================================================================
# RF_AZURE_TENANT_ID=
# RF_AZURE_CLIENT_ID=
# RF_AZURE_CLIENT_SECRET=
# RF_AZURE_SUBSCRIPTION_ID=

# =============================================================================
# Cloud Connectors - GCP
# =============================================================================
# Uses default credential chain (GOOGLE_APPLICATION_CREDENTIALS, metadata server)
# RF_GCP_PROJECT_ID=
# RF_GCP_CREDENTIALS_FILE=

# =============================================================================
# Cloud Connectors - vSphere
# =============================================================================
# RF_VSPHERE_URL=https://vcenter.example.com/sdk
# RF_VSPHERE_USER=
# RF_VSPHERE_PASSWORD=
# RF_VSPHERE_INSECURE=false

# =============================================================================
# Connectors Service
# =============================================================================
RF_CONNECTORS_HOST=0.0.0.0
RF_CONNECTORS_PORT=8081
RF_CONNECTORS_SYNC_INTERVAL=5m
RF_CONNECTORS_ENABLED=aws,azure,gcp,vsphere

# =============================================================================
# Drift Service
# =============================================================================
RF_DRIFT_HOST=0.0.0.0
RF_DRIFT_PORT=8082
RF_DRIFT_CALCULATION_INTERVAL=1h
RF_DRIFT_THRESHOLD_WARNING=90
RF_DRIFT_THRESHOLD_CRITICAL=70

# =============================================================================
# AI Orchestrator Service
# =============================================================================
RF_ORCHESTRATOR_HOST=0.0.0.0
RF_ORCHESTRATOR_PORT=8083
RF_ORCHESTRATOR_ENABLED=true

# =============================================================================
# LLM Configuration
# =============================================================================
# Supported providers: anthropic, azure_anthropic, azure_openai, openai

# Azure Anthropic (Claude on Microsoft Foundry) - RECOMMENDED
RF_LLM_PROVIDER=azure_anthropic
RF_LLM_AZURE_ANTHROPIC_ENDPOINT=https://quantumlayer-rf-resource.services.ai.azure.com
RF_LLM_API_KEY=your-azure-anthropic-api-key
RF_LLM_MODEL=claude-sonnet-4-5
RF_LLM_MAX_TOKENS=4096
RF_LLM_TEMPERATURE=0.3
RF_LLM_MAX_REQUESTS_PER_MINUTE=60

# Direct Anthropic (alternative)
# RF_LLM_PROVIDER=anthropic
# RF_LLM_API_KEY=sk-ant-api03-xxxxxxxxxxxx
# RF_LLM_MODEL=claude-sonnet-4-5-20250514

# Azure OpenAI (alternative provider)
# RF_LLM_PROVIDER=azure_openai
# RF_LLM_AZURE_ENDPOINT=https://your-resource.openai.azure.com
# RF_LLM_AZURE_API_VERSION=2024-02-15-preview
# RF_LLM_MODEL=gpt-4o

# OpenAI (alternative provider)
# RF_LLM_PROVIDER=openai
# RF_LLM_API_KEY=sk-xxxxxxxxxxxx
# RF_LLM_MODEL=gpt-4o

# Fallback configuration (optional)
# RF_LLM_FALLBACK_PROVIDER=openai
# RF_LLM_FALLBACK_MODEL=gpt-4o

# =============================================================================
# Temporal Workflow Engine
# =============================================================================
RF_TEMPORAL_HOST=localhost
RF_TEMPORAL_PORT=7233
RF_TEMPORAL_NAMESPACE=default
RF_TEMPORAL_TASK_QUEUE=ql-rf-orchestrator
RF_TEMPORAL_WORKER_COUNT=4
RF_TEMPORAL_MAX_CONCURRENT_WORKFLOWS=100
RF_TEMPORAL_MAX_CONCURRENT_ACTIVITIES=50

# Temporal Cloud (production)
# RF_TEMPORAL_TLS_ENABLED=true
# RF_TEMPORAL_TLS_CERT_PATH=/path/to/client.pem
# RF_TEMPORAL_TLS_KEY_PATH=/path/to/client.key

# =============================================================================
# OPA Policy Engine
# =============================================================================
RF_OPA_ENABLED=true
RF_OPA_MODE=embedded
RF_OPA_POLICIES_DIR=./policy
RF_OPA_EVAL_TIMEOUT=5s

# Remote OPA server (alternative)
# RF_OPA_MODE=remote
# RF_OPA_URL=http://localhost:8181

# =============================================================================
# Observability
# =============================================================================
RF_OTEL_ENABLED=false
RF_OTEL_ENDPOINT=localhost:4317
RF_METRICS_ENABLED=true
RF_METRICS_PATH=/metrics
